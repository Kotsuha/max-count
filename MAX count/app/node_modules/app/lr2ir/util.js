"use strict";

const querystring = require("querystring");

const MyPage = new (function MyPage() {
	this.getRivalIds = function($) {
		const $selfIntroTable = $("table").first(); // プレイヤーステータス table
		const $rivalRow = $("tr", $selfIntroTable).filter((i, el) => $("th", el).text() === "ライバル");
		let ids = [];
		$("a", $rivalRow).each(function(i, el) {
			const href = $(el).prop("href");
			const playerid = querystring.parse(href).playerid;
			ids.push(playerid);
		});
		return ids;
	};
})();

module.exports.MyPage = MyPage;
